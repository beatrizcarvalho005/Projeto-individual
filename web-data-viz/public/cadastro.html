<!DOCTYPE html>
<html lang="pt">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Cadastro</title>
  <link rel="stylesheet" href="style_cadastro.css">
</head>  <link rel="shortcut icon" type="imagex/png" href="./img/logo.png">

<body>

  <a href="home.html" id="voltar-home" title="Voltar para a página inicial">
    &#8592; Início
  </a>

  <div id="cad_tudo">
    <!-- Div do Cadastro -->

    <!-- <div id="img_cada"><img src="img/imagem_card_inscreva.png" alt=""> </div> -->

    <div id="cad_conteudo">

      <div id="cad_titulo">
        <h2>Cadastro</h2>
      </div>
  
      <!-- Formulário de Cadastro -->
      <div id="colunas">
        <label for="cad_nome">Nome:</label>
        <input type="text" id="cad_nome" name="nome">
      </div>
  
      <div id="colunas2">
        <label for="cad_email">Email:</label>
        <input type="email" id="cad_email" name="email">
      </div>
  
      <div id="colunas3">
        <label for="cad_senha">Senha:</label>
        <input type="password" id="cad_senha" name="senha">
      </div>
       <div id="colunas3">
        <label for="cad_confirmar">Senha:</label>
        <input type="password" id="cad_senha2" name="senha">
      </div>
  
      <button id="cad_botao" onclick="cadastrar()">Cadastrar</button>
      <p class="trocar-link">Já tem uma conta? <a href="#" onclick="mostrarLogin()">Entrar</a></p>
    </div>
  
    <!-- Div do Login -->
    <div id="img">

      <div id="login_conteudo">

        <div id="login_titulo">
          <h2>Login</h2>
        </div>
  
        <div id="login_colunas">
          <label for="login_email">Email:</label>
          <input type="email" id="login_email" name="email">
        </div>
  
        <div id="login_colunas2">
          <label for="login_senha">Senha:</label>
          <input type="password" id="login_senha" name="senha">
        </div>
  
        <button id="login_botao" onclick="autenticar()">Entrar</button>
        <p class="trocar-link">Não tem uma conta? <a href="#" onclick="mostrarCadastro()">Cadastre-se</a></p>
      </div>
    </div>

  </div>
  

</body>

</html>
<script>
  function cadastrar() {
  // aguardar();

  //Recupere o valor da nova input pelo nome do id
  // Agora vá para o método fetch logo abaixo
  var nomeVar = cad_nome.value;
  var emailVar = cad_email.value;
  var senhaVar = cad_senha.value;
  var confirmacaoSenhaVar = cad_senha2.value;

  // Verificando se há algum campo em branco
  if (
    nomeVar == "" ||
    emailVar == "" ||
    senhaVar == "" ||
    confirmacaoSenhaVar == "" 
  ) {
    alert 
      ("Existem campos em branco");
    return
  }
  if (senhaVar != confirmacaoSenhaVar) {
      alert ("Senhas não coincidem")

      return 
  }

  fetch("/usuarios/cadastrar", {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
      },
      body: JSON.stringify({
        // crie um atributo que recebe o valor recuperado aqui
        // Agora vá para o arquivo routes/usuario.js
        nomeServer: nomeVar,
        emailServer: emailVar,
        senhaServer: senhaVar,
      }),
    })
      .then(function (resposta) {
        console.log("resposta: ", resposta);

        if (resposta.ok) {

          alert 
        ("Cadastro realizado com sucesso!");


         
        } else {
          alert ("Houve um erro ao tentar realizar o cadastro!");
        }
      })
      .catch(function (resposta) {
        console.log(`#ERRO: ${resposta}`);
      });

    return false;
  }

  
</script>
